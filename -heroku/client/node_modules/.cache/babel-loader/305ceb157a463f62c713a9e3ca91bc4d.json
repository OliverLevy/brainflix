{"ast":null,"code":"import _toConsumableArray from\"/Users/oliverlevy/projects/brainflix/sprint-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/oliverlevy/projects/brainflix/sprint-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/oliverlevy/projects/brainflix/sprint-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/oliverlevy/projects/brainflix/sprint-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/oliverlevy/projects/brainflix/sprint-3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import axios from\"axios\";import Hero from\"../Hero/Hero\";import Description from\"../Description/Description\";import Comments from\"../Comments/Comments\";import SideVideo from\"../SideVideo/SideVideo\";import\"./Main.scss\";var Main=/*#__PURE__*/function(_React$Component){_inherits(Main,_React$Component);var _super=_createSuper(Main);function Main(){var _this;_classCallCheck(this,Main);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],mainVid:[]};_this.setDefaultVideo=function(){var id=_this.state.data[0].id;axios.get(\"/video/\".concat(id)).then(function(success){_this.setState({mainVid:success.data});}).catch(function(err){return alert(err);});};_this.setMainVideo=function(){var endpoint=_this.props.match.params.id;if(endpoint){axios.get(endpoint).then(function(suc){_this.setState({mainVid:suc.data});});}};_this.dynaDate=function(datePosted){var seconds=(Date.now()-datePosted)/1000;var unix=new Date(datePosted);var day=unix.getDate();var month=unix.getMonth()+1;var year=unix.getFullYear();if(seconds<60){return\"\".concat(Math.trunc(seconds),\"s ago\");}else if(seconds<3600){return\"\".concat(Math.trunc(seconds/60),\"m ago\");}else if(seconds<86400){return\"\".concat(Math.trunc(seconds/60/60),\"h ago\");}else if(seconds<2592000){return\"\".concat(Math.trunc(seconds/30/60/60),\"d ago\");}else{return\"\".concat(month,\"/\").concat(day,\"/\").concat(year);}};_this.addComment=function(comment){var oldData=_this.state.mainVid;var newData=[].concat(_toConsumableArray(_this.state.mainVid.comments),[comment.data]);oldData.comments=newData;_this.setState({mainVid:oldData});};_this.deleteComment=function(id){var oldData=_this.state.mainVid;var newData=oldData.comments.filter(function(item){return item.id!==id;});oldData.comments=newData;_this.setState({mainVid:oldData});};_this.submitHandler=function(event){event.preventDefault();if(event.target.commentBox.value===\"\"){return alert(\"There is nothing in your comment, please stop being a hecker.\");}else if(!_this.props.match.params.id){axios.post(\"/video/\".concat(_this.state.data[0].id,\"/comments\"),{name:\"Jon Barson\",comment:event.target.commentBox.value}).then(function(success){_this.addComment(success);}).catch(function(err){return console.log(err);});}else{axios.post(\"\".concat(_this.props.match.params.id,\"/comments\"),{name:\"Jon Barson\",comment:event.target.commentBox.value}).then(function(success){return _this.addComment(success);}).catch(function(err){return console.log(err);});}event.target.reset();};_this.deleteHandler=function(id){if(!_this.props.match.params.id){axios.delete(\"/video/\".concat(_this.state.data[0].id,\"/comments/\").concat(id)).then(function(success){return _this.deleteComment(id);}).catch(function(err){return console.log(err);});}else{axios.delete(\"\".concat(_this.props.match.params.id,\"/comments/\").concat(id)).then(function(success){return _this.deleteComment(id);}).catch(function(err){return console.log(err);});}};_this.updateVideoLike=function(success){_this.setState({mainVid:success.data});};_this.likeVideoHandler=function(){if(!_this.props.match.params.id){axios.post(\"/video/\".concat(_this.state.data[0].id,\"/like\")).then(function(success){return _this.updateVideoLike(success);}).catch(function(err){return console.log(err);});}else{axios.post(\"\".concat(_this.props.match.params.id,\"/like\")).then(function(success){return _this.updateVideoLike(success);}).catch(function(err){return console.log(err);});}};_this.likeCommentHandler=function(commentId){if(!_this.props.match.params.id){axios.post(\"/video/\".concat(_this.state.data[0].id,\"/comments/\").concat(commentId,\"/like\")).then(function(success){return _this.updateVideoLike(success);}).catch(function(err){return console.log(err);});}else{axios.post(\"\".concat(_this.props.match.params.id,\"/comments/\").concat(commentId,\"/like\")).then(function(success){return _this.updateVideoLike(success);}).catch(function(err){return console.log(err);});}};return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"/video\").then(function(success){_this2.setState({data:success.data});}).catch(function(err){return alert(err);});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,_prevState){if(!this.props.match.params.id&&this.props.match.params.id!==prevProps.match.params.id){this.setDefaultVideo();}else if(this.props.match.params.id!==prevProps.match.params.id){this.setMainVideo();}}},{key:\"render\",value:function render(){if(this.state.data.length===0||this.state.mainVid.length===0){if(this.state.data[0]||!this.props.match.params){this.setDefaultVideo();}else{this.setMainVideo();}return/*#__PURE__*/React.createElement(\"div\",{className:\"main__loading\"},/*#__PURE__*/React.createElement(\"h1\",null,\"loading...\"));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"main\"},/*#__PURE__*/React.createElement(Hero,{mainVid:this.state.mainVid}),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content__main\"},/*#__PURE__*/React.createElement(Description,{mainVid:this.state.mainVid,dynaDate:this.dynaDate,likeVideoHandler:this.likeVideoHandler}),/*#__PURE__*/React.createElement(Comments,{submitHandler:this.submitHandler,deleteHandler:this.deleteHandler,mainVid:this.state.mainVid.comments,dynaDate:this.dynaDate,likeCommentHandler:this.likeCommentHandler})),/*#__PURE__*/React.createElement(\"div\",{className:\"content__aside\"},/*#__PURE__*/React.createElement(SideVideo,{data:this.state.data,mainVid:this.state.mainVid}))));}}}]);return Main;}(React.Component);export default Main;","map":{"version":3,"sources":["/Users/oliverlevy/projects/brainflix/sprint-3/client/src/components/Main/Main.jsx"],"names":["React","axios","Hero","Description","Comments","SideVideo","Main","state","data","mainVid","setDefaultVideo","id","get","then","success","setState","catch","err","alert","setMainVideo","endpoint","props","match","params","suc","dynaDate","datePosted","seconds","Date","now","unix","day","getDate","month","getMonth","year","getFullYear","Math","trunc","addComment","comment","oldData","newData","comments","deleteComment","filter","item","submitHandler","event","preventDefault","target","commentBox","value","post","name","console","log","reset","deleteHandler","delete","updateVideoLike","likeVideoHandler","likeCommentHandler","commentId","prevProps","_prevState","length","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport Hero from \"../Hero/Hero\";\nimport Description from \"../Description/Description\";\nimport Comments from \"../Comments/Comments\";\nimport SideVideo from \"../SideVideo/SideVideo\";\nimport \"./Main.scss\";\n\n\nclass Main extends React.Component {\n  state = {\n    data: [],\n    mainVid: [],\n  };\n\n  setDefaultVideo = () => {\n    let id = this.state.data[0].id;\n    axios\n      .get(`/video/${id}`)\n      .then((success) => {\n        this.setState({\n          mainVid: success.data,\n        });\n      })\n      .catch((err) => alert(err));\n  };\n\n  componentDidMount() {\n    axios\n      .get(\"/video\")\n      .then((success) => {\n        this.setState({\n          data: success.data,\n        });\n      })\n      .catch((err) => alert(err));\n  }\n\n  componentDidUpdate(prevProps, _prevState) {\n    if (\n      !this.props.match.params.id &&\n      this.props.match.params.id !== prevProps.match.params.id\n    ) {\n      this.setDefaultVideo();\n    } else if (this.props.match.params.id !== prevProps.match.params.id) {\n      this.setMainVideo();\n    }\n  }\n\n  \n\n  setMainVideo = () => {\n    const endpoint = this.props.match.params.id;\n    if(endpoint){\n      axios.get(endpoint).then((suc) => {\n        this.setState({\n          mainVid: suc.data,\n        });\n      });\n    }\n  };\n\n  dynaDate = (datePosted) => {\n    let seconds = (Date.now() - datePosted) / 1000;\n    let unix = new Date(datePosted);\n    let day = unix.getDate();\n    let month = unix.getMonth() + 1;\n    let year = unix.getFullYear();\n    if (seconds < 60) {\n      return `${Math.trunc(seconds)}s ago`;\n    } else if (seconds < 3600) {\n      return `${Math.trunc(seconds / 60)}m ago`;\n    } else if (seconds < 86400) {\n      return `${Math.trunc(seconds / 60 / 60)}h ago`;\n    } else if (seconds < 2592000) {\n      return `${Math.trunc(seconds / 30 / 60 / 60)}d ago`;\n    } else {\n      return `${month}/${day}/${year}`;\n    }\n  };\n\n  addComment = (comment) => {\n    const oldData = this.state.mainVid;\n    const newData = [...this.state.mainVid.comments, comment.data];\n    oldData.comments = newData;\n    this.setState({\n      mainVid: oldData,\n    });\n  };\n\n  deleteComment = (id) => {\n    const oldData = this.state.mainVid;\n    const newData = oldData.comments.filter((item) => item.id !== id);\n    oldData.comments = newData;\n    this.setState({\n      mainVid: oldData,\n    });\n  }\n\n  submitHandler = (event) => {\n    event.preventDefault();\n    if (event.target.commentBox.value === \"\") {\n      return alert(\n        \"There is nothing in your comment, please stop being a hecker.\"\n      );\n    } else if (!this.props.match.params.id) {\n      axios\n        .post(`/video/${this.state.data[0].id}/comments`, {\n          name: \"Jon Barson\",\n          comment: event.target.commentBox.value,\n        })\n        .then((success) => {\n          this.addComment(success)\n        })\n        .catch((err) => console.log(err));\n    } else {\n      axios\n        .post(`${this.props.match.params.id}/comments`, {\n          name: \"Jon Barson\",\n          comment: event.target.commentBox.value,\n        })\n        .then((success) => this.addComment(success))\n        .catch((err) => console.log(err));\n    }\n    event.target.reset();\n  };\n\n  deleteHandler = (id) => {\n    if (!this.props.match.params.id) {\n      axios\n        .delete(`/video/${this.state.data[0].id}/comments/${id}`)\n        .then((success) => this.deleteComment(id))\n        .catch((err) => console.log(err));\n    } else {\n      axios\n        .delete(`${this.props.match.params.id}/comments/${id}`)\n        .then((success) => this.deleteComment(id))\n        .catch((err) => console.log(err));\n    }\n  };\n\n  updateVideoLike = (success) => {\n    this.setState({mainVid: success.data})\n  }\n\n  likeVideoHandler = () => {\n    if (!this.props.match.params.id) {\n      axios\n        .post(`/video/${this.state.data[0].id}/like`)\n        .then((success) => this.updateVideoLike(success))\n        .catch((err) => console.log(err));\n    } else {\n      axios\n        .post(`${this.props.match.params.id}/like`)\n        .then((success) => this.updateVideoLike(success))\n        .catch((err) => console.log(err));\n    }\n  }\n\n  likeCommentHandler = (commentId) => {\n    if (!this.props.match.params.id) {\n      axios\n        .post(`/video/${this.state.data[0].id}/comments/${commentId}/like`)\n        .then((success) => this.updateVideoLike(success))\n        .catch((err) => console.log(err));\n    } else {\n      axios\n        .post(`${this.props.match.params.id}/comments/${commentId}/like`)\n        .then((success) => this.updateVideoLike(success))\n        .catch((err) => console.log(err));\n    }\n  }\n\n  render() {\n    if (this.state.data.length === 0 || this.state.mainVid.length === 0) {\n      if (this.state.data[0] || !this.props.match.params) {\n        this.setDefaultVideo();\n      } else {\n        this.setMainVideo();\n      }\n      return (\n        <div className=\"main__loading\">\n          <h1>loading...</h1>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"main\">\n          <Hero mainVid={this.state.mainVid} />\n          <div className=\"content\">\n            <div className=\"content__main\">\n              <Description\n                mainVid={this.state.mainVid}\n                dynaDate={this.dynaDate}\n                likeVideoHandler={this.likeVideoHandler}\n              />\n              <Comments\n                submitHandler={this.submitHandler}\n                deleteHandler={this.deleteHandler}\n                mainVid={this.state.mainVid.comments}\n                dynaDate={this.dynaDate}\n                likeCommentHandler = {this.likeCommentHandler}\n              />\n            </div>\n            <div className=\"content__aside\">\n              <SideVideo data={this.state.data} mainVid={this.state.mainVid} />\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}